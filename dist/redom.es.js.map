{"version":3,"file":"redom.es.js","sources":["../src/create-element.js","../src/mount.js","../src/setstyle.js","../src/setattr.js","../src/text.js","../src/util.js","../src/html.js","../src/setchildren.js","../src/list.js","../src/router.js","../src/svg.js"],"sourcesContent":["const HASH = '#'.charCodeAt(0);\nconst DOT = '.'.charCodeAt(0);\n\n/**\n * Create HTML or SVG elements by query and namespace\n * @return {Node}\n * @param {string} query - Query (tagname#ids.classes)\n * @param {string} ns - Namespace\n */\nexport function createElement (query, ns) {\n  let tag;\n  let id;\n  let className;\n\n  let mode = 0;\n  let start = 0;\n\n  for (let i = 0; i <= query.length; i++) {\n    const char = query.charCodeAt(i);\n\n    if (char === HASH || char === DOT || !char) {\n      if (mode === 0) {\n        if (i === 0) {\n          tag = 'div';\n        } else if (!char) {\n          tag = query;\n        } else {\n          tag = query.substring(start, i);\n        }\n      } else {\n        const slice = query.substring(start, i);\n\n        if (mode === 1) {\n          id = slice;\n        } else if (className) {\n          className += ' ' + slice;\n        } else {\n          className = slice;\n        }\n      }\n\n      start = i + 1;\n\n      if (char === HASH) {\n        mode = 1;\n      } else {\n        mode = 2;\n      }\n    }\n  }\n\n  const element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n  if (id) {\n    element.id = id;\n  }\n\n  if (className) {\n    if (ns) {\n      element.setAttribute('class', className);\n    } else {\n      element.className = className;\n    }\n  }\n\n  return element;\n}\n","import { getEl } from './util';\n\nconst hookNames = ['onmount', 'onunmount'];\n\nexport function mount (parent, child, before) {\n  const parentEl = getEl(parent);\n  let childEl = getEl(child);\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  if (child !== childEl) {\n    childEl.__redom_view = child;\n  }\n\n  const wasMounted = childEl.__redom_mounted;\n  const oldParent = childEl.parentNode;\n\n  if (wasMounted && (oldParent !== parentEl)) {\n    doUnmount(child, childEl, oldParent);\n  }\n\n  if (before != null) {\n    parentEl.insertBefore(childEl, getEl(before));\n  } else {\n    parentEl.appendChild(childEl);\n  }\n\n  doMount(child, childEl, parentEl, oldParent);\n\n  return child;\n}\n\nexport function unmount (parent, child) {\n  const parentEl = getEl(parent);\n  const childEl = getEl(child);\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  doUnmount(child, childEl, parentEl);\n\n  parentEl.removeChild(childEl);\n\n  return child;\n}\n\nfunction doMount (child, childEl, parentEl, oldParent) {\n  const hooks = childEl.__redom_lifecycle || (childEl.__redom_lifecycle = {});\n  const remount = (parentEl === oldParent);\n  let hooksFound = false;\n\n  for (let i = 0; i < hookNames.length; i++) {\n    const hookName = hookNames[i];\n\n    if (!remount && (child !== childEl) && (hookName in child)) {\n      hooks[hookName] = (hooks[hookName] || 0) + 1;\n    }\n    if (hooks[hookName]) {\n      hooksFound = true;\n    }\n  }\n\n  if (!hooksFound) {\n    childEl.__redom_mounted = true;\n    return;\n  }\n\n  let traverse = parentEl;\n  let triggered = false;\n\n  if (remount || (!triggered && (traverse && traverse.__redom_mounted))) {\n    trigger(childEl, remount ? 'onremount' : 'onmount');\n    triggered = true;\n  }\n\n  if (remount) {\n    return;\n  }\n\n  while (traverse) {\n    const parent = traverse.parentNode;\n    const parentHooks = traverse.__redom_lifecycle || (traverse.__redom_lifecycle = {});\n\n    for (const hook in hooks) {\n      parentHooks[hook] = (parentHooks[hook] || 0) + hooks[hook];\n    }\n\n    if (!triggered && (traverse === document || (parent && parent.__redom_mounted))) {\n      trigger(traverse, remount ? 'onremount' : 'onmount');\n      triggered = true;\n    }\n\n    traverse = parent;\n  }\n}\n\nfunction doUnmount (child, childEl, parentEl) {\n  const hooks = childEl.__redom_lifecycle;\n\n  if (!hooks) {\n    childEl.__redom_mounted = false;\n    return;\n  }\n\n  let traverse = parentEl;\n\n  if (childEl.__redom_mounted) {\n    trigger(childEl, 'onunmount');\n  }\n\n  while (traverse) {\n    const parentHooks = traverse.__redom_lifecycle || (traverse.__redom_lifecycle = {});\n    let hooksFound = false;\n\n    for (const hook in hooks) {\n      if (parentHooks[hook]) {\n        parentHooks[hook] -= hooks[hook];\n      }\n      if (parentHooks[hook]) {\n        hooksFound = true;\n      }\n    }\n\n    if (!hooksFound) {\n      traverse.__redom_lifecycle = null;\n    }\n\n    traverse = traverse.parentNode;\n  }\n}\n\nfunction trigger (el, eventName) {\n  if (eventName === 'onmount') {\n    el.__redom_mounted = true;\n  } else if (eventName === 'onunmount') {\n    el.__redom_mounted = false;\n  }\n\n  const hooks = el.__redom_lifecycle;\n\n  if (!hooks) {\n    return;\n  }\n\n  const view = el.__redom_view;\n  let hookCount = 0;\n\n  view && view[eventName] && view[eventName]();\n\n  for (const hook in hooks) {\n    if (hook) {\n      hookCount++;\n    }\n  }\n\n  if (hookCount) {\n    let traverse = el.firstChild;\n\n    while (traverse) {\n      const next = traverse.nextSibling;\n\n      trigger(traverse, eventName);\n\n      traverse = next;\n    }\n  }\n}\n","import { isString, getEl } from './util';\n\nexport function setStyle (view, arg1, arg2) {\n  const el = getEl(view);\n\n  if (arg2 !== undefined) {\n    el.style[arg1] = arg2;\n  } else if (isString(arg1)) {\n    el.setAttribute('style', arg1);\n  } else {\n    for (const key in arg1) {\n      setStyle(el, key, arg1[key]);\n    }\n  }\n}\n","import { setStyle } from './setstyle';\nimport { isFunction, getEl } from './util';\n\nexport function setAttr (view, arg1, arg2) {\n  const el = getEl(view);\n  let isSVG = el instanceof window.SVGElement;\n\n  if (arg2 !== undefined) {\n    if (arg1 === 'style') {\n      setStyle(el, arg2);\n    } else if (isSVG && isFunction(arg2)) {\n      el[arg1] = arg2;\n    } else if (!isSVG && (arg1 in el || isFunction(arg2))) {\n      el[arg1] = arg2;\n    } else {\n      el.setAttribute(arg1, arg2);\n    }\n  } else {\n    for (const key in arg1) {\n      setAttr(el, key, arg1[key]);\n    }\n  }\n}\n","export const text = str => document.createTextNode(str);\n","import { html } from './html';\nimport { mount } from './mount';\nimport { setAttr } from './setattr';\nimport { text } from './text';\n\nexport function parseArguments (element, args) {\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i];\n\n    if (arg !== 0 && !arg) {\n      continue;\n    }\n\n    // support middleware\n    if (typeof arg === 'function') {\n      arg(element);\n    } else if (isString(arg) || isNumber(arg)) {\n      element.appendChild(text(arg));\n    } else if (isNode(getEl(arg))) {\n      mount(element, arg);\n    } else if (arg.length) {\n      parseArguments(element, arg);\n    } else if (typeof arg === 'object') {\n      setAttr(element, arg);\n    }\n  }\n}\n\nexport const ensureEl = parent => isString(parent) ? html(parent) : getEl(parent);\nexport const getEl = parent => (parent.nodeType && parent) || (!parent.el && parent) || getEl(parent.el);\n\nexport const isString = a => typeof a === 'string';\nexport const isNumber = a => typeof a === 'number';\nexport const isFunction = a => typeof a === 'function';\n\nexport const isNode = a => a && a.nodeType;\nexport const isList = a => a && a.__redom_list;\n","import { createElement } from './create-element';\nimport { parseArguments, isString, isNode } from './util';\n\nconst htmlCache = {};\n\nconst memoizeHTML = query => htmlCache[query] || (htmlCache[query] = createElement(query));\n\n/**\n * Create HTML elements with HyperScript-like syntax.\n * @return {Node}\n * @param {(String|Node)} query - Query (tagname#ids.classes)\n * @param {*} args\n */\nexport function html (query, ...args) {\n  let element;\n\n  if (isString(query)) {\n    element = memoizeHTML(query).cloneNode(false);\n  } else if (isNode(query)) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  parseArguments(element, args);\n\n  return element;\n}\n\n/**\n * @return {html}\n * @param {{(String|Node)}} query - Query (tagname#ids.classes)\n */\nfunction extend (query) {\n  const clone = memoizeHTML(query);\n\n  return html.bind(this, clone);\n}\n\nhtml.extend = extend;\n\nexport const el = html;\n","import { mount, unmount } from './mount';\nimport { getEl } from './util';\n\nexport function setChildren (parent, children) {\n  if (children.length === undefined) {\n    return setChildren(parent, [children]);\n  }\n\n  const parentEl = getEl(parent);\n  let traverse = parentEl.firstChild;\n\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n\n    if (!child) {\n      continue;\n    }\n\n    let childEl = getEl(child);\n\n    if (childEl === traverse) {\n      traverse = traverse.nextSibling;\n      continue;\n    }\n\n    mount(parent, child, traverse);\n  }\n\n  while (traverse) {\n    const next = traverse.nextSibling;\n\n    unmount(parent, traverse);\n\n    traverse = next;\n  }\n}\n","import { setChildren } from './setchildren';\nimport { isFunction, ensureEl } from './util';\nimport { unmount } from './mount';\n\nconst propKey = key => item => item[key];\n\n/**\n * List factory\n * @return {List}\n * @param {(Node | function)} parent\n * @param {function} View\n * @param {String | function} key\n * @param {*} initData\n */\nexport function list (parent, View, key, initData) {\n  return new List(parent, View, key, initData);\n}\n\n/**\n * Create list of Views\n * @return {List}\n * @param {(Node | function)} parent\n * @param {function} View\n * @param {String | function} key\n * @param {*} initData\n */\nexport function List (parent, View, key, initData) {\n  this.__redom_list = true;\n  this.View = View;\n  this.initData = initData;\n  this.views = [];\n  this.el = ensureEl(parent);\n\n  if (key != null) {\n    this.lookup = {};\n    this.key = isFunction(key) ? key : propKey(key);\n  }\n}\n\n/**\n *\n * @param {(Node | function)} parent\n * @param {function} View\n * @param {String | function} key\n * @param {*} initData\n */\nfunction extend (parent, View, key, initData) {\n  return List.bind(List, parent, View, key, initData);\n}\n\nList.extend = extend;\n\nlist.extend = List.extend;\n\nList.prototype.update = function (data = []) {\n  const View = this.View;\n  const key = this.key;\n  const keySet = key != null;\n  const initData = this.initData;\n  const newViews = new Array(data.length);\n  const oldViews = this.views;\n  const newLookup = key && {};\n  const oldLookup = key && this.lookup;\n\n  for (let i = 0; i < data.length; i++) {\n    const item = data[i];\n    let view;\n\n    if (keySet) {\n      const id = key(item);\n      view = newViews[i] = oldLookup[id] || new View(initData, item, i, data);\n      newLookup[id] = view;\n      view.__id = id;\n    } else {\n      view = newViews[i] = oldViews[i] || new View(initData, item, i, data);\n    }\n    let el = view.el;\n    if (el.__redom_list) {\n      el = el.el;\n    }\n    el.__redom_view = view;\n    view.update && view.update(item, i, data);\n  }\n\n  if (keySet) {\n    for (let i = 0; i < oldViews.length; i++) {\n      const id = oldViews[i].__id;\n\n      if (!(id in newLookup)) {\n        unmount(this, oldLookup[id]);\n      }\n    }\n  }\n\n  setChildren(this, newViews);\n\n  if (keySet) {\n    this.lookup = newLookup;\n  }\n  this.views = newViews;\n};\n","import { ensureEl } from './util';\nimport { setChildren } from './setchildren';\n\nexport function router (parent, Views, initData) {\n  return new Router(parent, Views, initData);\n}\n\nexport class Router {\n  constructor (parent, Views, initData) {\n    this.el = ensureEl(parent);\n    this.Views = Views;\n    this.initData = initData;\n  }\n  update (route, data) {\n    if (route !== this.route) {\n      const Views = this.Views;\n      const View = Views[route];\n\n      this.view = View && new View(this.initData, data);\n      this.route = route;\n\n      setChildren(this.el, [ this.view ]);\n    }\n    this.view && this.view.update && this.view.update(data, route);\n  }\n}\n","import { createElement } from './create-element';\nimport { parseArguments, isString, isNode } from './util';\n\nconst SVG = 'http://www.w3.org/2000/svg';\n\nconst svgCache = {};\n\nconst memoizeSVG = query => svgCache[query] || (svgCache[query] = createElement(query, SVG));\n\nexport function svg (query, ...args) {\n  let element;\n\n  if (isString(query)) {\n    element = memoizeSVG(query).cloneNode(false);\n  } else if (isNode(query)) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  parseArguments(element, args);\n\n  return element;\n}\n\nsvg.extend = function (query) {\n  const clone = memoizeSVG(query);\n\n  return svg.bind(this, clone);\n};\n"],"names":["const","query","ns","let","tag","id","className","mode","start","i","char","slice","element","parent","child","before","parentEl","childEl","wasMounted","oldParent","hooks","remount","hooksFound","hookName","traverse","triggered","parentHooks","hook","el","eventName","view","hookCount","next","arg1","arg2","key","isSVG","str","args","arg","a","clone","children","item","View","initData","extend","data","keySet","newViews","oldViews","newLookup","oldLookup","this","Views","route"],"mappings":"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"}